CALL WSETCONTENTTYPE("application/json")

* WOBJ(OBJ,ACTION,PARAM1,PARAM2,OPTIONS,ERRORS)

CALL WOBJ(RESPONSEOBJ,"FROMSTRING","","{}","",RERR)

CALL WGETVAR(NAME,"name")

CALL WGETBODY(BODY)

CALL WOBJ(BODYOBJ,"FROMSTRING","",BODY,"",RERR)

CALL WOBJ(BODYOBJ,"GET","name",BODY.NAME,"",RERR)

IF BODY.NAME # "" THEN NAME=BODY.NAME

MSG="Hello ":NAME:" from line ":@USER.NO

CALL WOBJ(RESPONSEOBJ,"SET","message",MSG,"",RERR)

CALL WOBJ(RESPONSEOBJ,"TOSTRING","",JSON,"PRETTIFY",RERR)

CALL WSEND(JSON)
